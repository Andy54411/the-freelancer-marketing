const fs = require('fs');
const path = require('path');

// Backup der aktuellen Datei erstellen
const sourceFile = '/Users/andystaudinger/Tasko/src/contexts/LanguageContext.tsx';
const backupFile = '/Users/andystaudinger/Tasko/src/contexts/LanguageContext.tsx.broken';

console.log('Erstelle Backup der defekten Datei...');
fs.copyFileSync(sourceFile, backupFile);

// Datei lesen
console.log('Lese LanguageContext.tsx...');
let content = fs.readFileSync(sourceFile, 'utf8');

// Finde den Beginn der translations
const translationsStart = content.indexOf('const translations = {');
if (translationsStart === -1) {
  console.error('translations-Objekt nicht gefunden!');
  process.exit(1);
}

// Finde das Ende der translations (vor };\n\nexport)
const translationsEndPattern = /};\s*\n\s*export/;
const translationsEndMatch = content.match(translationsEndPattern);
if (!translationsEndMatch) {
  console.error('Ende des translations-Objekts nicht gefunden!');
  process.exit(1);
}

const translationsEnd = translationsEndMatch.index;

// Extrahiere den Teil vor translations
const beforeTranslations = content.substring(0, translationsStart);

// Extrahiere den Teil nach translations
const afterTranslations = content.substring(translationsEnd + 2); // +2 für "};"

console.log('Erstelle saubere translations...');

// Erstelle eine saubere translations-Struktur
const cleanTranslations = {
  de: {
    // Basis UI-Texte
    loading: 'Lädt...',
    error: 'Fehler',
    success: 'Erfolgreich',
    cancel: 'Abbrechen',
    save: 'Speichern',
    delete: 'Löschen',
    edit: 'Bearbeiten',
    close: 'Schließen',
    back: 'Zurück',
    next: 'Weiter',
    submit: 'Absenden',
    search: 'Suchen',
    filter: 'Filter',
    sort: 'Sortieren',
    name: 'Name',
    email: 'E-Mail',
    phone: 'Telefon',
    address: 'Adresse',
    description: 'Beschreibung',
    price: 'Preis',
    date: 'Datum',
    time: 'Zeit',
    status: 'Status',
    category: 'Kategorie',
    service: 'Service',
    provider: 'Anbieter',
    customer: 'Kunde',
    order: 'Auftrag',
    orders: 'Aufträge',
    dashboard: 'Dashboard',
    profile: 'Profil',
    settings: 'Einstellungen',
    logout: 'Abmelden',
    login: 'Anmelden',
    register: 'Registrieren',
    password: 'Passwort',
    confirm: 'Bestätigen',
    welcome: 'Willkommen',
    hello: 'Hallo',
    goodbye: 'Auf Wiedersehen',
    yes: 'Ja',
    no: 'Nein',
    maybe: 'Vielleicht',
    required: 'Erforderlich',
    optional: 'Optional',
    available: 'Verfügbar',
    unavailable: 'Nicht verfügbar',
    online: 'Online',
    offline: 'Offline',
    new: 'Neu',
    old: 'Alt',
    active: 'Aktiv',
    inactive: 'Inaktiv',
    pending: 'Ausstehend',
    completed: 'Abgeschlossen',
    cancelled: 'Storniert',
    accepted: 'Angenommen',
    rejected: 'Abgelehnt',
    payment: 'Zahlung',
    invoice: 'Rechnung',
    total: 'Gesamt',
    subtotal: 'Zwischensumme',
    tax: 'Steuer',
    discount: 'Rabatt',
    shipping: 'Versand',
    free: 'Kostenlos',
    premium: 'Premium',
    basic: 'Basis',
    advanced: 'Erweitert',
    help: 'Hilfe',
    support: 'Support',
    contact: 'Kontakt',
    about: 'Über uns',
    terms: 'AGB',
    privacy: 'Datenschutz',
    imprint: 'Impressum',
  },
  en: {
    loading: 'Loading...',
    error: 'Error',
    success: 'Success',
    cancel: 'Cancel',
    save: 'Save',
    delete: 'Delete',
    edit: 'Edit',
    close: 'Close',
    back: 'Back',
    next: 'Next',
    submit: 'Submit',
    search: 'Search',
    filter: 'Filter',
    sort: 'Sort',
    name: 'Name',
    email: 'Email',
    phone: 'Phone',
    address: 'Address',
    description: 'Description',
    price: 'Price',
    date: 'Date',
    time: 'Time',
    status: 'Status',
    category: 'Category',
    service: 'Service',
    provider: 'Provider',
    customer: 'Customer',
    order: 'Order',
    orders: 'Orders',
    dashboard: 'Dashboard',
    profile: 'Profile',
    settings: 'Settings',
    logout: 'Logout',
    login: 'Login',
    register: 'Register',
    password: 'Password',
    confirm: 'Confirm',
    welcome: 'Welcome',
    hello: 'Hello',
    goodbye: 'Goodbye',
    yes: 'Yes',
    no: 'No',
    maybe: 'Maybe',
    required: 'Required',
    optional: 'Optional',
    available: 'Available',
    unavailable: 'Unavailable',
    online: 'Online',
    offline: 'Offline',
    new: 'New',
    old: 'Old',
    active: 'Active',
    inactive: 'Inactive',
    pending: 'Pending',
    completed: 'Completed',
    cancelled: 'Cancelled',
    accepted: 'Accepted',
    rejected: 'Rejected',
    payment: 'Payment',
    invoice: 'Invoice',
    total: 'Total',
    subtotal: 'Subtotal',
    tax: 'Tax',
    discount: 'Discount',
    shipping: 'Shipping',
    free: 'Free',
    premium: 'Premium',
    basic: 'Basic',
    advanced: 'Advanced',
    help: 'Help',
    support: 'Support',
    contact: 'Contact',
    about: 'About',
    terms: 'Terms',
    privacy: 'Privacy',
    imprint: 'Imprint',
  },
  es: {
    loading: 'Cargando...',
    error: 'Error',
    success: 'Éxito',
    cancel: 'Cancelar',
    save: 'Guardar',
    delete: 'Eliminar',
    edit: 'Editar',
    close: 'Cerrar',
    back: 'Atrás',
    next: 'Siguiente',
    submit: 'Enviar',
    search: 'Buscar',
    filter: 'Filtro',
    sort: 'Ordenar',
    name: 'Nombre',
    email: 'Correo',
    phone: 'Teléfono',
    address: 'Dirección',
    description: 'Descripción',
    price: 'Precio',
    date: 'Fecha',
    time: 'Hora',
    status: 'Estado',
    category: 'Categoría',
    service: 'Servicio',
    provider: 'Proveedor',
    customer: 'Cliente',
    order: 'Pedido',
    orders: 'Pedidos',
    dashboard: 'Panel',
    profile: 'Perfil',
    settings: 'Configuración',
    logout: 'Cerrar sesión',
    login: 'Iniciar sesión',
    register: 'Registrarse',
    password: 'Contraseña',
    confirm: 'Confirmar',
    welcome: 'Bienvenido',
    hello: 'Hola',
    goodbye: 'Adiós',
    yes: 'Sí',
    no: 'No',
    maybe: 'Tal vez',
    required: 'Requerido',
    optional: 'Opcional',
    available: 'Disponible',
    unavailable: 'No disponible',
    online: 'En línea',
    offline: 'Fuera de línea',
    new: 'Nuevo',
    old: 'Viejo',
    active: 'Activo',
    inactive: 'Inactivo',
    pending: 'Pendiente',
    completed: 'Completado',
    cancelled: 'Cancelado',
    accepted: 'Aceptado',
    rejected: 'Rechazado',
    payment: 'Pago',
    invoice: 'Factura',
    total: 'Total',
    subtotal: 'Subtotal',
    tax: 'Impuesto',
    discount: 'Descuento',
    shipping: 'Envío',
    free: 'Gratis',
    premium: 'Premium',
    basic: 'Básico',
    advanced: 'Avanzado',
    help: 'Ayuda',
    support: 'Soporte',
    contact: 'Contacto',
    about: 'Acerca de',
    terms: 'Términos',
    privacy: 'Privacidad',
    imprint: 'Aviso legal',
  },
  fr: {
    loading: 'Chargement...',
    error: 'Erreur',
    success: 'Succès',
    cancel: 'Annuler',
    save: 'Enregistrer',
    delete: 'Supprimer',
    edit: 'Modifier',
    close: 'Fermer',
    back: 'Retour',
    next: 'Suivant',
    submit: 'Soumettre',
    search: 'Rechercher',
    filter: 'Filtre',
    sort: 'Trier',
    name: 'Nom',
    email: 'Email',
    phone: 'Téléphone',
    address: 'Adresse',
    description: 'Description',
    price: 'Prix',
    date: 'Date',
    time: 'Heure',
    status: 'Statut',
    category: 'Catégorie',
    service: 'Service',
    provider: 'Fournisseur',
    customer: 'Client',
    order: 'Commande',
    orders: 'Commandes',
    dashboard: 'Tableau de bord',
    profile: 'Profil',
    settings: 'Paramètres',
    logout: 'Déconnexion',
    login: 'Connexion',
    register: "S'inscrire",
    password: 'Mot de passe',
    confirm: 'Confirmer',
    welcome: 'Bienvenue',
    hello: 'Bonjour',
    goodbye: 'Au revoir',
    yes: 'Oui',
    no: 'Non',
    maybe: 'Peut-être',
    required: 'Requis',
    optional: 'Optionnel',
    available: 'Disponible',
    unavailable: 'Indisponible',
    online: 'En ligne',
    offline: 'Hors ligne',
    new: 'Nouveau',
    old: 'Ancien',
    active: 'Actif',
    inactive: 'Inactif',
    pending: 'En attente',
    completed: 'Terminé',
    cancelled: 'Annulé',
    accepted: 'Accepté',
    rejected: 'Rejeté',
    payment: 'Paiement',
    invoice: 'Facture',
    total: 'Total',
    subtotal: 'Sous-total',
    tax: 'Taxe',
    discount: 'Remise',
    shipping: 'Expédition',
    free: 'Gratuit',
    premium: 'Premium',
    basic: 'Basique',
    advanced: 'Avancé',
    help: 'Aide',
    support: 'Support',
    contact: 'Contact',
    about: 'À propos',
    terms: 'Conditions',
    privacy: 'Confidentialité',
    imprint: 'Mentions légales',
  },
};

// Erstelle den neuen Dateiinhalt
const translationsString = JSON.stringify(cleanTranslations, null, 2);
const newContent =
  beforeTranslations + 'const translations = ' + translationsString + ';\n\n' + afterTranslations;

// Schreibe die reparierte Datei
console.log('Schreibe reparierte LanguageContext.tsx...');
fs.writeFileSync(sourceFile, newContent, 'utf8');

console.log('✅ LanguageContext.tsx wurde erfolgreich repariert!');
console.log('✅ Backup der defekten Datei: LanguageContext.tsx.broken');
console.log('✅ Die Datei enthält jetzt saubere Basis-Übersetzungen für DE, EN, ES, FR');
